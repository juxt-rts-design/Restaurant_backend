{
  "info": {
    "name": "Restauration Interactive API",
    "description": "API compl√®te pour application de restauration avec QR codes",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "qrCode",
      "value": "TBL001ABC123DEF456789",
      "type": "string"
    },
    {
      "key": "sessionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "jwtToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üè† Accueil",
      "item": [
        {
          "name": "Informations API",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/",
              "host": ["{{baseUrl}}"],
              "path": [""]
            }
          }
        },
        {
          "name": "√âtat du serveur",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          }
        }
      ]
    },
    {
      "name": "üë• Client - QR Code",
      "item": [
        {
          "name": "Scanner QR Code",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/table/{{qrCode}}",
              "host": ["{{baseUrl}}"],
              "path": ["table", "{{qrCode}}"]
            }
          }
        },
        {
          "name": "Cr√©er session client",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomComplet\": \"Jean Dupont\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/client/table/{{qrCode}}/session",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "table", "{{qrCode}}", "session"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('sessionId', response.data.session.id);",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üçΩÔ∏è Client - Menu",
      "item": [
        {
          "name": "R√©cup√©rer le menu",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/client/menu",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "menu"]
            }
          }
        },
        {
          "name": "Rechercher dans le menu",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/client/menu?q=poulet",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "menu"],
              "query": [
                {
                  "key": "q",
                  "value": "poulet"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üõí Client - Panier",
      "item": [
        {
          "name": "Ajouter au panier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idProduit\": 1,\n  \"quantite\": 2\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/client/session/{{sessionId}}/cart",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "session", "{{sessionId}}", "cart"]
            }
          }
        },
        {
          "name": "R√©cup√©rer le panier",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/client/session/{{sessionId}}/cart",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "session", "{{sessionId}}", "cart"]
            }
          }
        },
        {
          "name": "Modifier quantit√©",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quantite\": 3\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/client/cart/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "cart", "1"]
            }
          }
        },
        {
          "name": "Supprimer du panier",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/client/cart/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "cart", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "‚úÖ Client - Commande",
      "item": [
        {
          "name": "Valider la commande",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/client/session/{{sessionId}}/order/validate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "session", "{{sessionId}}", "order", "validate"]
            }
          }
        }
      ]
    },
    {
      "name": "üí≥ Client - Paiement",
      "item": [
        {
          "name": "Cr√©er paiement (Carte)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"methodePaiement\": \"CARTE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/client/session/{{sessionId}}/payment",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "session", "{{sessionId}}", "payment"]
            }
          }
        },
        {
          "name": "Cr√©er paiement (Esp√®ces)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"methodePaiement\": \"ESPECES\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/client/session/{{sessionId}}/payment",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "session", "{{sessionId}}", "payment"]
            }
          }
        },
        {
          "name": "Cr√©er paiement (Mobile Money)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"methodePaiement\": \"MOBILE_MONEY\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/client/session/{{sessionId}}/payment",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "session", "{{sessionId}}", "payment"]
            }
          }
        },
        {
          "name": "Cr√©er paiement (√Ä la caisse)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"methodePaiement\": \"A_LA_CAISSE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/client/session/{{sessionId}}/payment",
              "host": ["{{baseUrl}}"],
              "path": ["api", "client", "session", "{{sessionId}}", "payment"]
            }
          }
        }
      ]
    },
    {
      "name": "üè™ Caisse - Commandes",
      "item": [
        {
          "name": "Commandes en attente",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/orders/pending",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "orders", "pending"]
            }
          }
        },
        {
          "name": "D√©tails d'une commande",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/orders/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "orders", "1"]
            }
          }
        },
        {
          "name": "Marquer comme servie",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/orders/1/serve",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "orders", "1", "serve"]
            }
          }
        },
        {
          "name": "Annuler commande",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/orders/1/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "orders", "1", "cancel"]
            }
          }
        }
      ]
    },
    {
      "name": "üí∞ Caisse - Paiements",
      "item": [
        {
          "name": "Paiements en cours",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/payments/pending",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "payments", "pending"]
            }
          }
        },
        {
          "name": "Valider paiement par code",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"codeValidation\": \"ABC12345\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/caisse/payments/validate-code",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "payments", "validate-code"]
            }
          }
        },
        {
          "name": "Valider paiement par ID",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/payments/1/validate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "payments", "1", "validate"]
            }
          }
        },
        {
          "name": "Historique des paiements",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/payments/history?limit=10&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "payments", "history"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üìä Caisse - Statistiques",
      "item": [
        {
          "name": "Statistiques du jour",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/stats/daily",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "stats", "daily"]
            }
          }
        },
        {
          "name": "Sessions actives",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/sessions/active",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "sessions", "active"]
            }
          }
        },
        {
          "name": "Rechercher commandes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/caisse/search?q=Jean&type=commande",
              "host": ["{{baseUrl}}"],
              "path": ["api", "caisse", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "Jean"
                },
                {
                  "key": "type",
                  "value": "commande"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üë®‚Äçüíº Manager - Tableau de bord",
      "item": [
        {
          "name": "Tableau de bord",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/dashboard",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "dashboard"]
            }
          }
        }
      ]
    },
    {
      "name": "üçΩÔ∏è Manager - Produits",
      "item": [
        {
          "name": "Liste des produits",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "products"]
            }
          }
        },
        {
          "name": "Rechercher produits",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/products?q=poulet",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "products"],
              "query": [
                {
                  "key": "q",
                  "value": "poulet"
                }
              ]
            }
          }
        },
        {
          "name": "Cr√©er un produit",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomProduit\": \"Nouveau plat\",\n  \"description\": \"Description du nouveau plat\",\n  \"prixCfa\": 3000,\n  \"stockDisponible\": 50\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/manager/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "products"]
            }
          }
        },
        {
          "name": "Modifier un produit",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomProduit\": \"Poulet r√¥ti modifi√©\",\n  \"prixCfa\": 4800,\n  \"stockDisponible\": 35\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/manager/products/5",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "products", "5"]
            }
          }
        },
        {
          "name": "Supprimer un produit",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/products/25",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "products", "25"]
            }
          }
        }
      ]
    },
    {
      "name": "ü™ë Manager - Tables",
      "item": [
        {
          "name": "Liste des tables",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/tables",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "tables"]
            }
          }
        },
        {
          "name": "Cr√©er une table",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomTable\": \"Table 9\",\n  \"capacite\": 4\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/manager/tables",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "tables"]
            }
          }
        },
        {
          "name": "Modifier une table",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomTable\": \"Table 1 modifi√©e\",\n  \"capacite\": 6,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/manager/tables/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "tables", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "üìä Manager - Rapports",
      "item": [
        {
          "name": "Historique des ventes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/sales/history?dateDebut=2024-01-01&dateFin=2024-01-31",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "sales", "history"],
              "query": [
                {
                  "key": "dateDebut",
                  "value": "2024-01-01"
                },
                {
                  "key": "dateFin",
                  "value": "2024-01-31"
                }
              ]
            }
          }
        },
        {
          "name": "Statistiques d√©taill√©es",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/stats/detailed?dateDebut=2024-01-01&dateFin=2024-01-31",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "stats", "detailed"],
              "query": [
                {
                  "key": "dateDebut",
                  "value": "2024-01-01"
                },
                {
                  "key": "dateFin",
                  "value": "2024-01-31"
                }
              ]
            }
          }
        },
        {
          "name": "Rapport de ventes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/reports?type=ventes&dateDebut=2024-01-01&dateFin=2024-01-31",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "reports"],
              "query": [
                {
                  "key": "type",
                  "value": "ventes"
                },
                {
                  "key": "dateDebut",
                  "value": "2024-01-01"
                },
                {
                  "key": "dateFin",
                  "value": "2024-01-31"
                }
              ]
            }
          }
        },
        {
          "name": "Rapport des commandes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/reports?type=commandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "reports"],
              "query": [
                {
                  "key": "type",
                  "value": "commandes"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üîó Manager - QR Codes",
      "item": [
        {
          "name": "G√©n√©rer QR codes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/qr-codes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "qr-codes"]
            }
          }
        }
      ]
    },
    {
      "name": "üë• Manager - Clients",
      "item": [
        {
          "name": "Liste des clients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/clients?limit=20&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "clients"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        },
        {
          "name": "Rechercher clients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/manager/clients?q=Jean",
              "host": ["{{baseUrl}}"],
              "path": ["api", "manager", "clients"],
              "query": [
                {
                  "key": "q",
                  "value": "Jean"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
